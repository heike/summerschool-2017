{
    "collab_server" : "",
    "contents" : "---\ntitle: \"Motivating Example\"\nsubtitle: \"Midwest Big Data Summer School\"\nauthor: \"Heike Hofmann (hofmann@iastate.edu, @heike_hh), Eric Hare\"\ndate: \"`r Sys.Date()`\"\noutput:\n  ioslides_presentation:\n    transition: default\n    widescreen: true\ncss:\n  styles.css\n---\n\n## Motivating Example\n\n- Kick things off by looking at a real data set in R\n- Goal: get the flavor of using R for data management and exploration\n- Don't worry about understanding all the coding right away\n- We will come back to see how everything works in detail\n\n## Tips Dataset\n\n- Tips data set recorded by a server in a restaurant over a span of about 10 weeks\n- Server recorded several variables about groups he served:\n    - Amount he was tipped\n    - Overall bill\n    - Several characteristics about the groups being served\n- __Primary Question__: How do these variable influence the amount being tipped?\n\n- Follow along (copy & paste the code into the console):\n```{r, eval = FALSE}\ncurl::curl_download(\n  \"https://raw.githubusercontent.com/heike/rwrks/gh-pages/summerschool/01-Introduction-to-R/code/1-example.R\",\n  \"1-example.R\"\n)\nfile.edit(\"1-example.R\")\n```\n\n\n## First look at data in R\n\nLets use R to look at the top few rows of the tips data set. First, we load the tips data  `read.csv`:\n\n```{r}\ntips <- read.csv(\"http://heike.github.io/rwrks/summerschool/data/tips.csv\")\n```\n\nNow, we use the `head` function to look at the first 6 rows of the data:\n\n```{r}\nhead(tips)\n```\n\n## Tips Data Attributes\n\nHow big is this data set and what types of variables are in each column?\n\n```{r}\nstr(tips)\n```\n\n## Tips Variables\n\nLet's get a summary of the values for each variable in tips:\n\n```{r}\nsummary(tips)\n```\n\n# How does the overall amount affect the tip?\n\n## Scatterplots: tip versus total bill \n\nFirst, we need to install and load `ggplot2`:\n\n```{r, eval=FALSE}\ninstall.packages(\"ggplot2\")\nlibrary(ggplot2)\n```\n\n```{r, echo=FALSE}\nlibrary(ggplot2)\n```\n\n```{r, fig.height=3, fig.width=7}\nqplot(x = total_bill, y = tip, geom = \"point\", data = tips)\n```\n\n## \n\n```{r, fig.height=3, fig.width=7, echo = FALSE}\nqplot(x = total_bill, y = tip, geom = \"point\", data = tips)\n```\n\nThere is a surprising amount of scatter!\n\nCorrelation is below 0.70\n```{r}\ncor(tips$total_bill, tips$tip)\n```\n\n\n## Points and Line\n\nAdd linear regression line to the plot\n\n```{r, fig.height=4, fig.width=7}\nqplot(total_bill, tip, geom = \"point\", data = tips) + \n    geom_smooth(method = \"lm\")\n```\n\n## Closer Look\n\n```{r, fig.height=5, fig.width=5, echo = FALSE}\nqplot(x = total_bill, y = tip, geom = \"point\", data = tips) +\n  scale_y_continuous(breaks=0:10)\n```\n\nWhat do the horizontal lines mean?\n\n\n## More Scatterplots\n\nColor the points by lunch and dinner groups\n\n```{r, fig.height=4, fig.width=7}\nqplot(total_bill, tip, geom = \"point\", data = tips, colour = time)\n```\n\n\n## Rate of Tipping\n\nTipping is generally done using a rule of thumb based on a percentage of the total bill. We  create a new variable in the data set for the tipping rate = tip / total bill\n\n```{r}\ntips$rate <- tips$tip / tips$total_bill\n\nsummary(tips$rate)\n```\n\n## Tipping Rate Histogram\n\nLets look distribution of tipping rate values with a histogram\n\n```{r, fig.height=4, fig.width=7}\nqplot(rate, data = tips, binwidth = .01)\n```\n\n## Someone is an AMAZING tipper...\n\nOne person tipped over 70%, who are they?\n\n```{r}\ntips[which.max(tips$rate),]\n```\n\n## Gender differences?\n\nColor the points by gender of the person who pays the bill\n\n```{r, fig.height=4, fig.width=7}\nqplot(total_bill, tip, geom = \"point\", data = tips, colour = sex)\n```\n\n## Rates by Gender\n\nLook at the average tipping rate for men and women seperately\n\n```{r}\nmean(tips$rate[tips$sex == \"Male\"])\nmean(tips$rate[tips$sex == \"Female\"])\n```\n\n\n## Statistical Significance\n\nThere is a difference but is it statistically significant?\n\n```{r}\nt.test(rate ~ sex, data = tips)\n```\n\n## Multiple co-variates\n\nWe can use facetting to find whether rates of tipping depend on gender and smoking\n```{r, fig.height=4, fig.width=4}\nqplot(total_bill, tip, geom = \"point\", data = tips, facets=smoker~sex) \n```\n\n## Your Turn {data-background=#527a7a}\n\nTry playing with chunks of code from this session to further investigate the tips data:\n\n1. Get a summary of the total bill values\n2. Find the average tip value for smokers\n3. Get scatterplots of tip versus total bill  for different days of the week\n",
    "created" : 1466504502336.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2407769285",
    "id" : "2958FDEB",
    "lastKnownWriteTime" : 1466538648,
    "last_content_update" : 1466538648087,
    "path" : "~/rwrks/summerschool/01-Introduction-to-R/knitr/1-example.Rmd",
    "project_path" : "1-example.Rmd",
    "properties" : {
    },
    "relative_order" : 7,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}